<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="BattleMapMain.Views.UserMonstersView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:Models="clr-namespace:BattleMapMain.Models"
    xmlns:viewmodels="clr-namespace:BattleMapMain.ViewModels"
    Title="User Monsters"
    x:DataType="viewmodels:UserMonstersViewModel"
    BackgroundColor="#f2f2f7"
    Shell.FlyoutBehavior="Disabled">

    <Grid>

        <ScrollView>
            <VerticalStackLayout Padding="16" Spacing="12">

                <Entry
                    Placeholder="Search by monster name"
                    Text="{Binding SearchBar}"
                    HeightRequest="50"
                    BackgroundColor="White"
                    TextColor="Black"
                    PlaceholderColor="#888" />

                <CollectionView
                    x:Name="collection"
                    ItemsSource="{Binding SearchedMonsters}"
                    SelectedItem="{Binding SelectedMonster}"
                    SelectionMode="Single"
                    >

                    <CollectionView.ItemTemplate>
                        <DataTemplate x:DataType="Models:Monster">
                            <Border
                                BackgroundColor="White"
                                Margin="0,5"
                                Stroke="#ccc"
                                StrokeThickness="1">

                                <Grid Padding="10" ColumnDefinitions="*,Auto">
                                    <Label
                                        Grid.Column="0"
                                        Text="{Binding MonsterName}"
                                        FontAttributes="Bold"
                                        FontSize="16"
                                        TextColor="#333"
                                        VerticalTextAlignment="Center" />

                                    <Label
                                        Grid.Column="1"
                                        Text="{Binding Hp}"
                                        FontAttributes="Bold"
                                        FontSize="14"
                                        TextColor="#666"
                                        VerticalTextAlignment="Center"
                                        HorizontalTextAlignment="End" />
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>

                    <CollectionView.EmptyView>
                        <StackLayout Padding="20" Spacing="10" HorizontalOptions="Center" VerticalOptions="Center">
                            <Label
                                Text="No monsters found."
                                FontAttributes="Italic"
                                TextColor="#999"
                                FontSize="16"
                                HorizontalOptions="Center" />
                        </StackLayout>
                    </CollectionView.EmptyView>
                </CollectionView>

            </VerticalStackLayout>
        </ScrollView>

        <Button
            Text="+"
            FontSize="24"
            WidthRequest="60"
            HeightRequest="60"
            BackgroundColor="#007AFF"
            TextColor="White"
            Command="{Binding GoToAddCommand}"
            HorizontalOptions="End"
            VerticalOptions="End"
            Margin="20" />
    </Grid>
</ContentPage>
